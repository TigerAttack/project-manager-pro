# دليل النشر والتوزيع الشامل - Project Manager Pro

## المقدمة

يهدف هذا الدليل إلى توضيح كيفية نشر وتوزيع تطبيق Project Manager Pro على جميع المنصات المدعومة باستخدام GitHub Actions والأدوات الحديثة للبناء التلقائي. سيغطي هذا الدليل جميع جوانب عملية النشر من البداية حتى وصول التطبيق للمستخدمين النهائيين.

## البنية التحتية للنشر

### نظام البناء التلقائي

تم إعداد نظام بناء متطور باستخدام GitHub Actions يدعم البناء المتوازي على ثلاث منصات رئيسية. يعتمد النظام على مصفوفة بناء (build matrix) تضمن تشغيل عمليات البناء بشكل متوازي ومستقل على كل منصة، مما يقلل من وقت البناء الإجمالي ويضمن الاستقرار.

يتكون النظام من مرحلتين أساسيتين: مرحلة البناء (Build) ومرحلة الإصدار (Release). في مرحلة البناء، يتم تشغيل ثلاث مهام متوازية على أنظمة التشغيل المختلفة، حيث تقوم كل مهمة ببناء التطبيق وإنتاج الملفات التنفيذية المناسبة للمنصة المحددة. بعد اكتمال جميع مهام البناء بنجاح، تبدأ مرحلة الإصدار التي تجمع جميع الملفات المُنتجة وتنشرها كإصدار موحد.

### متطلبات البنية التحتية

لضمان نجاح عملية النشر، يجب توفر عدة متطلبات أساسية. أولاً، مستودع GitHub مُعد بشكل صحيح مع صلاحيات الكتابة والنشر. ثانياً، تكوين صحيح لملف package.json يتضمن جميع المعلومات اللازمة لبناء التطبيق على المنصات المختلفة. ثالثاً، ملفات الأيقونات بالتنسيقات المطلوبة لكل منصة (.ico للويندوز، .icns للماك، .png للينكس).

## إعداد المنصات المختلفة

### منصة ويندوز

يتم بناء التطبيق على ويندوز باستخدام أحدث إصدار من Windows Server في بيئة GitHub Actions. يدعم النظام إنتاج عدة تنسيقات للتوزيع تلبي احتياجات المستخدمين المختلفة.

أولاً، مثبت NSIS الذي يوفر تجربة تثبيت تفاعلية ومرنة. يسمح هذا المثبت للمستخدمين باختيار مجلد التثبيت وإنشاء اختصارات على سطح المكتب وقائمة ابدأ. يتضمن المثبت أيضاً خيارات لإلغاء التثبيت الكامل وإدارة التحديثات المستقبلية.

ثانياً، حزمة MSI التي تتوافق مع سياسات الشركات وأنظمة النشر المؤسسية. تدعم هذه الحزمة التثبيت الصامت والإدارة المركزية عبر Group Policy، مما يجعلها مثالية للبيئات المؤسسية الكبيرة.

ثالثاً، أرشيف ZIP محمول لا يتطلب تثبيت، مما يسمح للمستخدمين بتشغيل التطبيق مباشرة من أي مجلد. هذا الخيار مفيد للمستخدمين الذين لا يملكون صلاحيات إدارية أو يفضلون التطبيقات المحمولة.

### منصة macOS

بناء التطبيق على macOS يتطلب اعتبارات خاصة لضمان التوافق مع سياسات الأمان الصارمة في نظام التشغيل. يدعم النظام بناء التطبيق لمعماريتين: Intel x64 و Apple Silicon ARM64، مما يضمن التوافق مع جميع أجهزة Mac الحديثة.

صورة القرص DMG توفر تجربة تثبيت أنيقة ومألوفة لمستخدمي Mac. تتضمن الصورة واجهة سحب وإفلات بسيطة تسمح للمستخدمين بنقل التطبيق إلى مجلد Applications بسهولة. يمكن تخصيص مظهر صورة القرص لتعكس هوية التطبيق البصرية.

أرشيف ZIP يوفر بديلاً مضغوطاً لتوزيع التطبيق، خاصة مفيد للتحميل السريع أو التوزيع عبر قنوات أخرى غير Mac App Store.

### منصة Linux

Linux يتطلب دعم توزيعات متعددة بأنظمة إدارة حزم مختلفة. تم إعداد النظام لإنتاج عدة تنسيقات تغطي معظم التوزيعات الشائعة.

AppImage يوفر حلاً محمولاً يعمل على جميع توزيعات Linux الحديثة دون الحاجة لتثبيت. يتضمن الملف جميع التبعيات المطلوبة ويمكن تشغيله مباشرة بعد منح صلاحيات التنفيذ.

حزمة DEB مخصصة لتوزيعات Debian وUbuntu ومشتقاتها. تدعم إدارة التبعيات التلقائية وتتكامل مع نظام إدارة الحزم apt، مما يسهل التثبيت والتحديث.

حزمة RPM تخدم توزيعات Red Hat وFedora وCentOS وSUSE. تتوافق مع أنظمة إدارة الحزم yum وdnf وzypper، وتدعم التوقيع الرقمي للحزم.

أرشيف TAR.GZ يوفر خياراً عاماً لجميع أنظمة Unix-like، مفيد للتثبيت اليدوي أو في البيئات المخصصة.

## عملية الإصدار التلقائية

### تشغيل البناء

يمكن تشغيل عملية البناء بثلاث طرق مختلفة حسب الحاجة والغرض. الطريقة الأولى هي الإصدار المُعلم (Tagged Release) الذي يتم تشغيله عند إنشاء tag جديد في Git. هذه الطريقة مخصصة للإصدارات الرسمية وتؤدي إلى نشر الملفات تلقائياً في صفحة Releases.

الطريقة الثانية هي البناء التلقائي عند Push إلى branch main. هذا مفيد للتحقق من سلامة الكود وضمان قابلية البناء مع كل تحديث، لكن لا ينتج عنه إصدار رسمي.

الطريقة الثالثة هي التشغيل اليدوي (Manual Dispatch) الذي يسمح للمطورين بتشغيل البناء عند الحاجة دون انتظار push أو إنشاء tag.

### مراحل البناء التفصيلية

تبدأ عملية البناء بمرحلة الإعداد حيث يتم استنساخ الكود المصدري وإعداد بيئة Node.js. يتم تثبيت جميع التبعيات باستخدام npm ci لضمان التثبيت السريع والموثوق.

مرحلة بناء React تحول الكود المصدري إلى ملفات HTML وCSS وJavaScript محسنة للإنتاج. يتم تطبيق تحسينات مختلفة مثل تصغير الملفات وضغط الصور وتجميع الموارد.

مرحلة بناء Electron تأخذ ملفات React المُحسنة وتحزمها مع Electron runtime لإنتاج تطبيق سطح مكتب كامل. يتم تطبيق تكوينات مختلفة لكل منصة حسب المتطلبات الخاصة.

مرحلة التحزيم النهائية تنتج الملفات القابلة للتوزيع بالتنسيقات المطلوبة. يتم تطبيق التوقيع الرقمي عند توفر الشهادات المناسبة.

## إدارة الإصدارات

### استراتيجية الترقيم

يتبع المشروع نظام Semantic Versioning (SemVer) لضمان وضوح وتناسق أرقام الإصدارات. يتكون رقم الإصدار من ثلاثة أجزاء: MAJOR.MINOR.PATCH.

رقم MAJOR يزيد عند إجراء تغييرات غير متوافقة مع الإصدارات السابقة. هذا يشمل تغيير واجهات برمجة التطبيقات أو إزالة ميزات موجودة أو تغيير سلوك أساسي في التطبيق.

رقم MINOR يزيد عند إضافة ميزات جديدة بطريقة متوافقة مع الإصدارات السابقة. هذا يشمل إضافة صفحات جديدة أو تحسين الواجهة أو إضافة خيارات تكوين جديدة.

رقم PATCH يزيد عند إصلاح أخطاء أو تحسينات صغيرة لا تؤثر على الوظائف الموجودة. هذا يشمل إصلاح bugs أو تحسين الأداء أو تحديث التبعيات الأمنية.

### إدارة التحديثات

يدعم التطبيق نظام إشعارات التحديث الذي يتحقق دورياً من وجود إصدارات جديدة. يمكن تكوين هذا النظام ليعمل تلقائياً أو يدوياً حسب تفضيلات المستخدم.

عند توفر تحديث جديد، يعرض التطبيق إشعاراً يتضمن معلومات عن الإصدار الجديد والميزات المضافة. يمكن للمستخدم اختيار تحميل التحديث فوراً أو تأجيله لوقت لاحق.

يدعم النظام التحديث التدريجي (Incremental Updates) الذي يحمل فقط الملفات المتغيرة، مما يقلل من حجم التحميل ووقت التحديث.

## الأمان والتوقيع الرقمي

### توقيع التطبيقات

التوقيع الرقمي ضروري لضمان ثقة المستخدمين وتجنب تحذيرات الأمان من أنظمة التشغيل. على ويندوز، يتطلب الأمر شهادة Code Signing من مرجع معتمد. يتم تخزين الشهادة بشكل آمن في GitHub Secrets وتستخدم أثناء عملية البناء.

على macOS، يتطلب التوقيع عضوية في Apple Developer Program والحصول على شهادة Developer ID. يجب أيضاً تفعيل Notarization لضمان قبول التطبيق من قبل Gatekeeper.

على Linux، التوقيع اختياري لكنه مفيد لضمان سلامة الحزم. يمكن استخدام GPG لتوقيع الحزم والمستودعات.

### الحماية من التلاعب

يتم حساب checksums لجميع الملفات المُنتجة وتضمينها في معلومات الإصدار. هذا يسمح للمستخدمين بالتحقق من سلامة الملفات المحملة.

يتم استخدام HTTPS لجميع عمليات التحميل والتحديث لضمان الحماية من هجمات man-in-the-middle.

## التوزيع والنشر

### قنوات التوزيع الرسمية

GitHub Releases يعتبر القناة الرسمية الأساسية لتوزيع التطبيق. يوفر واجهة واضحة لتحميل الملفات مع معلومات مفصلة عن كل إصدار.

يمكن إعداد موقع ويب مخصص للتطبيق يوفر روابط تحميل مباشرة مع اكتشاف تلقائي لنظام التشغيل المناسب.

### متاجر التطبيقات

للوصول لجمهور أوسع، يمكن نشر التطبيق في متاجر التطبيقات المختلفة. Microsoft Store يدعم تطبيقات Electron ويوفر توزيعاً واسعاً لمستخدمي ويندوز.

Mac App Store يتطلب تعديلات إضافية للتوافق مع sandbox requirements، لكنه يوفر وصولاً لجميع مستخدمي Mac.

Snap Store وFlatpak يوفران توزيعاً واسعاً لمستخدمي Linux مع إدارة تحديثات تلقائية.

### التوزيع المؤسسي

للعملاء المؤسسيين، يمكن إعداد مستودعات خاصة أو خوادم توزيع داخلية. يدعم النظام التكامل مع أنظمة إدارة البرمجيات المؤسسية مثل SCCM على ويندوز أو Jamf على macOS.

يمكن تخصيص عملية البناء لإنتاج حزم مخصصة تتضمن تكوينات أو شعارات خاصة بالعميل.

## مراقبة ومتابعة الأداء

### تحليل الاستخدام

يمكن دمج أدوات تحليل الاستخدام لفهم كيفية استخدام التطبيق وتحديد المناطق التي تحتاج تحسين. يجب ضمان احترام خصوصية المستخدمين والامتثال للوائح حماية البيانات.

### مراقبة الأخطاء

نظام تقارير الأخطاء التلقائي يساعد في اكتشاف وإصلاح المشاكل بسرعة. يمكن استخدام خدمات مثل Sentry أو Bugsnag لجمع وتحليل تقارير الأخطاء.

### قياس الأداء

مراقبة أداء التطبيق تشمل قياس أوقات التحميل واستهلاك الذاكرة واستجابة الواجهة. هذه المعلومات مفيدة لتحسين الأداء في الإصدارات المستقبلية.

## الخلاصة والتوصيات

نظام النشر والتوزيع المُعد يوفر حلاً شاملاً ومتطوراً لتوزيع التطبيق على جميع المنصات الرئيسية. يضمن النظام الجودة والأمان مع توفير مرونة في التخصيص والتوسع.

للحصول على أفضل النتائج، يُنصح بمراجعة وتحديث عملية النشر بانتظام لمواكبة التطورات في أنظمة التشغيل وأدوات البناء. كما يُنصح بإجراء اختبارات شاملة على جميع المنصات قبل كل إصدار رسمي.

الاستثمار في أتمتة عملية النشر يوفر وقتاً كبيراً ويقلل من الأخطاء البشرية، مما يؤدي إلى إصدارات أكثر استقراراً وموثوقية.

